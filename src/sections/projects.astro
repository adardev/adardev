---
import TitleSection from "../components/titleSection.astro";
import Section from "../components/section.astro";
---

<Section id="projects">
    <TitleSection
            imageSrc="/dist/icons/code_icon.svg"
            imageAlt="Ícono de perfil"
            title="Proyectos"
    />
    <div class="w-full max-w-[1400px] px-4 mx-auto relative flex items-center justify-center">
        <div class="relative w-full max-w-[1400px] mx-auto px-4">
            <!-- Flechas fuera del contenedor del carrusel -->
            <button class="absolute left-[-5rem] top-1/2 -translate-y-1/2 bg-[#096871] rounded-full p-3 z-10 hover:bg-[#0e6c86] transition-colors"
                    id="prev-project">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24"
                     stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                </svg>
            </button>

            <button class="absolute right-[-5rem] top-1/2 -translate-y-1/2 bg-[#096871] rounded-full p-3 z-10 hover:bg-[#0e6c86] transition-colors"
                    id="next-project">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24"
                     stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
            </button>

            <!-- Carrusel de proyectos superpuestos -->
            <div class="relative h-fit">
                <!-- Proyecto 1 -->
                <div class="absolute transition-all duration-500 ease-in-out" data-carousel-item>
                    <div class="flex flex-row justify-center items-center gap-10 h-fit">
                        <div class="transition-transform duration-300 ease-in-out transform scale-100 hover:scale-105 hover:z-50 -mr-[40rem] bg-[#096871] rounded-2xl p-5 w-[750px] h-[400px] z-10 flex flex-col items-center gap-4">
                            <div class="flex flex-row justify-between w-full">
                                <div>
                                    <div class="flex flex-row items-center gap-5">
                                        <img src="/dist/logos/adarlpz_logo.svg" width="50px" alt="Imagen">
                                        <p class="text-3xl font-semibold text-white">Densora</p>
                                    </div>
                                </div>
                                <div class="flex flex-row">
                                    <div class="flex flex-row gap-2">
                                        <img src="/dist/logos/android_logo.svg" width="30px" alt="Imagen">
                                        <img src="/dist/logos/iOS_logo.svg" width="30px" alt="Imagen">
                                    </div>
                                    <div class="w-[2px] h-auto rounded-2xl bg-white mx-4"></div>
                                    <div class="flex flex-row gap-2">
                                        <img src="/dist/logos/nodejs_logo.svg" width="30px" alt="Imagen">
                                        <img src="/dist/logos/tailwind_logo.svg" width="30px" alt="Imagen">
                                        <img src="/dist/logos/csharp_logo.svg" width="30px" alt="Imagen">
                                    </div>
                                </div>
                            </div>
                            <p class="text-white text-xl text-justify">Lorem Ipsum is simply dummy text of the printing
                                and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever
                                since the 1500s, when an unknown printer took a galley of type and scrambled it to make
                                a type specimen book.</p>
                            <div class="flex flex-row gap-4 w-full justify-between">
                                <div class="flex bg-[#0e6c86] p-2 rounded-2xl gap-3 items-center justify-center w-full cursor-pointer hover:bg-[#0d5a70] transition-colors">
                                    <img src="/dist/logos/github_logo.svg" width="30px" alt="Imagen">
                                    <p class="text-white font-semibold">Ver código</p>
                                </div>
                                <div class="flex bg-[#0e6c86] p-2 rounded-2xl gap-3 items-center justify-center px-5 cursor-pointer hover:bg-[#0d5a70] transition-colors">
                                    <img src="/dist/icons/web_icon.svg" class="w-[30px]" alt="Imagen">
                                    <p class="text-white font-semibold">Visitar</p>
                                </div>
                            </div>
                        </div>

                        <div class="transition-transform duration-300 ease-in-out transform scale-100 hover:scale-105 hover:z-50 -mr-32 p-0 w-[640px] h-[360px] z-0 flex flex-col items-center justify-center gap-4 rounded-2xl">
                            <img src="/dist/demos/tekkure_demo.jpg" class="w-full h-full object-cover rounded-2xl"
                                 alt="Demo proyecto"/>
                        </div>
                    </div>
                </div>

                <!-- Proyecto 2 -->
                <div class="absolute transition-all duration-500 ease-in-out" data-carousel-item>
                    <div class="flex flex-row justify-center items-center gap-10 h-fit">
                        <div class="transition-transform duration-300 ease-in-out transform scale-100 hover:scale-105 hover:z-50 -mr-[20.5rem] bg-[#096871] rounded-2xl p-5 w-[750px] h-[400px] z-10 flex flex-col items-center gap-4">
                            <div class="flex flex-row justify-between w-full">
                                <div class="flex flex-row items-center gap-5">
                                    <img src="/dist/logos/adarlpz_logo.svg" width="50px" alt="Imagen">
                                    <p class="text-3xl font-semibold text-white">Tekkure</p>
                                </div>
                                <div class="flex flex-row">
                                    <div class="flex flex-row gap-2">
                                        <img src="/dist/logos/windows_logo.svg" width="30px" alt="Imagen">
                                    </div>
                                    <div class="w-[2px] h-auto rounded-2xl bg-white mx-4"></div>
                                    <div class="flex flex-row gap-2">
                                        <img src="/dist/logos/c++_logo.svg" width="30px" alt="Imagen">
                                        <img src="/dist/logos/astro_logo.svg" width="30px" alt="Imagen">
                                        <img src="/dist/logos/react_logo.svg" width="30px" alt="Imagen">
                                    </div>
                                </div>
                            </div>
                            <p class="text-white text-xl text-justify">Lorem Ipsum is simply dummy text of the printing
                                and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever
                                since the 1500s, when an unknown printer took a galley of type and scrambled it to make
                                a type specimen book.</p>
                            <div class="flex flex-row gap-4 w-full justify-between">
                                <div class="flex bg-[#0e6c86] p-2 rounded-2xl gap-3 items-center justify-center w-full cursor-pointer hover:bg-[#0d5a70] transition-colors">
                                    <img src="/dist/logos/github_logo.svg" class="w-[30px]" alt="Imagen">
                                    <p class="text-white font-semibold">Ver código</p>
                                </div>
                                <div class="flex bg-[#0e6c86] p-2 rounded-2xl gap-3 items-center justify-center px-5 cursor-pointer hover:bg-[#0d5a70] transition-colors">
                                    <img src="/dist/icons/web_icon.svg" class="w-[30px]" alt="Imagen">
                                    <p class="text-white font-semibold">Visitar</p>
                                </div>
                            </div>
                        </div>

                        <div class="flex flex-row transition-transform duration-300 ease-in-out transform scale-100 hover:scale-105 hover:z-50 ml-[9.5rem] p-0 w-[180px] h-[360px] z-0 cursor-pointer items-center justify-center gap-4 rounded-2xl">
                            <div class="w-[180px] h-[360px]">
                                <img src="/dist/demos/densora_demo.png" class="w-full h-full object-cover rounded-2xl"
                                     alt="Demo proyecto"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Indicadores -->
            <div class="flex justify-center mt-8 gap-2" id="project-indicators">
                <!-- Los indicadores se generarán con JavaScript -->
            </div>
        </div>
    </div>
    <!-- Script para el carrusel -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const projects = document.querySelectorAll('[data-carousel-item]');
            const prevBtn = document.getElementById('prev-project');
            const nextBtn = document.getElementById('next-project');
            const indicatorsContainer = document.getElementById('project-indicators');

            let currentIndex = 0;
            const totalProjects = projects.length;

            // Crear indicadores
            projects.forEach((_, index) => {
                const indicator = document.createElement('div');
                indicator.className = `w-3 h-3 rounded-full cursor-pointer ${index === 0 ? 'bg-white' : 'bg-gray-500'}`;
                indicator.addEventListener('click', () => {
                    goToProject(index);
                });
                indicatorsContainer.appendChild(indicator);
            });

            // Función para mostrar el proyecto actual
            function showProject(index) {
                projects.forEach((project, i) => {
                    if (i === index) {
                        project.style.opacity = '1';
                        project.style.zIndex = '20';
                        project.style.pointerEvents = 'auto';
                    } else {
                        project.style.opacity = '0';
                        project.style.zIndex = '10';
                        project.style.pointerEvents = 'none';
                    }
                });

                // Actualizar indicadores
                document.querySelectorAll('#project-indicators > div').forEach((indicator, i) => {
                    indicator.className = `w-3 h-3 rounded-full cursor-pointer ${i === index ? 'bg-white' : 'bg-gray-500'}`;
                });
            }

            // Ir a un proyecto específico
            function goToProject(index) {
                currentIndex = index;
                showProject(currentIndex);
            }

            // Botón anterior
            prevBtn.addEventListener('click', () => {
                currentIndex = (currentIndex - 1 + totalProjects) % totalProjects;
                showProject(currentIndex);
            });

            // Botón siguiente
            nextBtn.addEventListener('click', () => {
                currentIndex = (currentIndex + 1) % totalProjects;
                showProject(currentIndex);
            });

            // Inicializar
            showProject(currentIndex);

            // Opcional: Carrusel automático
            let autoPlay = setInterval(() => {
                currentIndex = (currentIndex + 1) % totalProjects;
                showProject(currentIndex);
            }, 5000);

            // Pausar al interactuar
            const carouselContainer = document.querySelector('.relative.w-full');
            carouselContainer.addEventListener('mouseenter', () => {
                clearInterval(autoPlay);
            });

            carouselContainer.addEventListener('mouseleave', () => {
                autoPlay = setInterval(() => {
                    currentIndex = (currentIndex + 1) % totalProjects;
                    showProject(currentIndex);
                }, 5000);
            });
        });
    </script>
</Section>